<!-- 
This is a file for leagueSearch.js

 -->

<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="style.css">
  <link class="img-test" rel="shortcut icon" type="image/png" href="images/firefoxLogo.png">
</head>

<header>
	<nav>
		<div class="header-wrapper">
			<ul>
				<li>
					<a href="startpage.php">
					<img class="img-test" src="images/firefoxLogo.png" alt="HTML5 Icon" style="padding: 5px; float:left; width:50px; height:50px;">
					</a>
				</li>
				<li><a class="button-test" href="startpage.php">HOME</a></li>
				<li><a class="button-test" href="portfolio.php">PORTFOLIO</a></li>
				<li><a class="button-test" href="about.php">ABOUT</a></li>
				<li><a class="button-test" href="contact.php">CONTACT</a></li>
			</ul>
			<div class="nav-login">
				
			</div>
		</div>
	</nav>
</header>

<body>
  <h2 style="color:white; text-align:center; font-size:30px; padding-top: 5%">Search Your Position</h2>

  <p style="color:white; font-size: 15px; text-align: center">
			Latitude: <span id="lat"></span>° 
		<br>
			Longitude: <span id="lon"></span>°
		<br>
			Start Google Maps, then Copy and Paste the following output there: <span style="color:gold" id="lat2"></span>, <span style="color:gold" id="lon2"></span>
	</p>

	<p style="text-align:center; padding-top:3%; padding-bottom:3%">
		<input id="vegetable" style="text-align:center" />
		<button id="submit" style="text-align:center">Submit</button>
		<br>
		<label for="vegetable" style="color:white">Enter summonername</label>
	</p>


  <script>
  	let lat, lon, lat2, lon2; 
  	const button = document.getElementById('submit');
    
    button.addEventListener('click', async event => {
    	const vegetable = document.getElementById('vegetable').value;
		const data = { lat, lon, vegetable };
		
		const options = {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify(data)
		}
		const response = await fetch('/api', options);
		/* RESPONSE IS EMPTY right now. I cannot find why.. Help! */ 
		console.log(response);
		const dataJson = await response.json();
		console.log(dataJson);
	});
  	
  	// Geolocation is avaliable as soon as website is deployed on a (https) hosting service.
  	if('geolocation' in navigator) {
  		console.log('geolocation avaliable');
  		navigator.geolocation.getCurrentPosition(async position => {
  			lat = position.coords.latitude;
  			lon = position.coords.longitude;
  			lat2 = position.coords.latitude;
  			lon2 = position.coords.longitude;
  			document.getElementById('lat').textContent = lat;
  			document.getElementById('lon').textContent = lon;
  			document.getElementById('lat2').textContent = lat2;
  			document.getElementById('lon2').textContent = lon2;
  			//console.log(position);
  		});
  	}
  	else {
  		console.log('geolocation IS NOT avaliable');
  	}
  </script>
	

</body>

</html>